# Document Title
# Documentation Inventory GitHub Actions Workflow
#
# Document Type
# CI Governance Inventory Workflow
#
# Status
# Canonical
#
# Version
# v1.0
#
# Date
# 2026-01-06
#
# Owner / Maintained by
# Prospera Architecture Group
#
# Governing Authority
# Prospera OS Governance Kernel

name: Documentation Inventory Run

on:
  workflow_dispatch:

jobs:
  documentation-inventory:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: Run documentation inventory
        run: |
          python << 'EOF'
          import json
          from pathlib import Path

          inventory = []

          for md in Path(".").rglob("*.md"):
              content = md.read_text(encoding="utf-8", errors="ignore")

              inventory.append({
                  "file_path": str(md),
                  "file_name": md.name,
                  "has_document_title": "Document Title" in content,
                  "has_document_type": "Document Type" in content,
                  "has_version": "Version" in content,
                  "has_end_marker": "End of Document" in content
              })

          report = {
              "total_files": len(inventory),
              "inventory": inventory
          }

          Path("documentation-inventory-report.json").write_text(
              json.dumps(report, indent=2),
              encoding="utf-8"
          )

          print("Inventory completed. Files scanned:", len(inventory))
          EOF

      - name: Upload inventory report
        uses: actions/upload-artifact@v4
        with:
          name: documentation-inventory-report
          path: documentation-inventory-report.json
